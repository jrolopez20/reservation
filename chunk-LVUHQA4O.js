import{a as et,h as W,i as it,p as Vt,q as jt}from"./chunk-6DVTH745.js";import{A as Dt,B as wt,C as Tt,D as T,E as z,F as U,G as kt,H as Et,I as k,J as It,K as Pt,L as Ft,M as Lt,N as Ot,O as Rt,P as At,Q as Bt,R as $t,S as _,a as $,b as Mt,c as V,d as j,e as St,t as N,u as G,v as H,w as tt,x as yt,y as Q,z as bt}from"./chunk-O6BYB7NV.js";import{$ as f,Aa as C,Db as gt,Ea as E,Fb as X,Gb as Z,Hb as x,Ja as I,Ka as mt,La as u,Ob as ht,Pa as J,Pb as B,Qa as dt,Qb as vt,Ra as b,Sa as D,Sb as P,Ta as r,Ua as a,Va as q,W as L,Wa as w,Za as d,_a as m,a as pt,aa as O,b as lt,bb as ut,da as v,ea as M,fb as ft,gb as Ct,hb as xt,ib as K,jb as c,kb as _t,lb as S,n as nt,nb as h,qb as g,rb as R,sb as A,za as p}from"./chunk-QXF6JL4R.js";var Gt=(()=>{let t=class t{constructor(o){this.router=o}logout(){this.router.navigate(["/login"])}};t.\u0275fac=function(e){return new(e||t)(C(B))},t.\u0275cmp=f({type:t,selectors:[["app-main"]],standalone:!0,features:[h],decls:15,vars:1,consts:[["color","primary","fxLayout","row","fxLayoutAlign","space-between center"],["routerLink","/",2,"display","flex"],["src","assets/images/logo-white.svg",2,"width","150px"],["fxLayout","row"],["mat-icon-button","",3,"mat-menu-trigger-for"],["x-position","before"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(e,n){if(e&1&&(r(0,"mat-toolbar",0)(1,"span")(2,"a",1),q(3,"img",2),a()(),r(4,"div",3)(5,"button",4)(6,"mat-icon"),c(7,"person"),a()()()(),r(8,"mat-menu",5,6)(10,"button",7),d("click",function(){return n.logout()}),r(11,"mat-icon"),c(12,"exit_to_app"),a(),c(13," Logout "),a()(),q(14,"router-outlet")),e&2){let s=K(9);p(5),u("mat-menu-trigger-for",s)}},dependencies:[x,ht,_,$,j,St,wt,Dt,Tt,T,U,P,vt]});let i=t;return i})();var te=i=>i.concept,Ht=it(te,i=>i.concepts);var ee=["conceptsSelector"],ie=(i,t)=>t._id;function oe(i,t){if(i&1&&(r(0,"mat-list-option",4),c(1),a()),i&2){let l=t.$implicit;u("value",l),p(),_t(l.name)}}function ne(i,t){i&1&&(r(0,"mat-card-footer"),q(1,"mat-progress-bar",5),a())}var Ut=(()=>{let t=class t{constructor(o,e){this.store=o,this.router=e,this.concepts$=this.store.select(Ht),this.isLoading$=this.store.select(n=>n.concept.loading)}onSchedule(){if(!this.conceptsSelector.selectedOptions.isEmpty()){let e=this.conceptsSelector.selectedOptions.selected.map(n=>n.value);this.router.navigateByUrl("/schedule",{state:{selectedConcepts:e}})}}};t.\u0275fac=function(e){return new(e||t)(C(W),C(B))},t.\u0275cmp=f({type:t,selectors:[["app-select-concept"]],viewQuery:function(e,n){if(e&1&&ft(ee,5),e&2){let s;Ct(s=xt())&&(n.conceptsSelector=s.first)}},standalone:!0,features:[h],decls:17,vars:6,consts:[["conceptsSelector",""],["align","end"],["mat-flat-button","","color","primary","matTooltip","Schedule the selected concepts",3,"disabled","click"],[4,"ngIf"],[3,"value"],["mode","indeterminate","color","primary"]],template:function(e,n){if(e&1&&(r(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),c(3,"Concepts"),a(),r(4,"mat-card-subtitle"),c(5,"Select the concepts you want to schedule"),a()(),r(6,"mat-card-content")(7,"mat-selection-list",null,0),b(9,oe,2,2,"mat-list-option",4,ie),g(11,"async"),a()(),r(12,"mat-card-actions",1)(13,"button",2),d("click",function(){return n.onSchedule()}),c(14," Schedule "),a()(),I(15,ne,2,0,"mat-card-footer",3),g(16,"async"),a()),e&2){let s=K(8);p(9),D(R(11,2,n.concepts$)),p(4),u("disabled",s.selectedOptions.isEmpty()),p(2),u("ngIf",R(16,4,n.isLoading$))}},dependencies:[x,gt,X,_,N,yt,H,bt,Q,tt,G,z,Et,kt,k,$t,P,et],styles:["mat-card[_ngcontent-%COMP%]{max-width:400px;margin:1em auto}"]});let i=t;return i})();var Wt=(()=>{let t=class t{constructor(o){this.dialogRef=o}};t.\u0275fac=function(e){return new(e||t)(C(Ft))},t.\u0275cmp=f({type:t,selectors:[["app-confirm"]],standalone:!0,features:[h],decls:9,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","end"],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(e,n){e&1&&(r(0,"h1",0),c(1,"Remove reservation"),a(),r(2,"div",1),c(3,"Would you like to remove the reservation?"),a(),r(4,"div",2)(5,"button",3),c(6,"No"),a(),r(7,"button",4),c(8,"Yes"),a()()),e&2&&(p(5),u("mat-dialog-close",!1),p(2),u("mat-dialog-close",!0))},dependencies:[_,z,Ot,Rt,Bt,At]});let i=t;return i})();var ae=i=>i.reservation,ot=it(ae,i=>i.reservations);var ce=(i,t)=>t._id;function se(i,t){if(i&1){let l=w();r(0,"button",6),d("click",function(){v(l);let e=m().$implicit,n=m();return M(n.unselectConcept(n.date,e))}),r(1,"mat-icon",7),c(2,"check"),a(),r(3,"span"),c(4),g(5,"async"),a()()}if(i&2){let l=m().$implicit,o=m(),e;p(4),S(" ",(e=R(5,1,o.getPositionReserved(o.date,l)))==null?null:e.name," ")}}function pe(i,t){if(i&1){let l=w();r(0,"button",6),d("click",function(){v(l);let e=m().$implicit,n=m();return M(n.selectConcept(n.date,e))}),c(1),a()}if(i&2){let l=m().$implicit;p(),S(" Select ",l.name.toLowerCase()," ")}}function le(i,t){if(i&1&&(I(0,se,6,3,"button",5),g(1,"async"),I(2,pe,2,1)),i&2){let l=t.$implicit,o=m();J(0,R(1,1,o.isReserved(o.date,l))?0:2)}}var qt=(()=>{let t=class t{constructor(o,e){this.dialog=o,this.store=e,this.date=new Date,this.concepts=[],this.selectedConcept=new E,this.deselectConcept=new E,this.reservations$=this.store.select(ot)}unselectConcept(o,e){this.dialog.open(Wt).afterClosed().subscribe(s=>{s&&this.deselectConcept.emit({date:o,concept:e})})}selectConcept(o,e){this.selectedConcept.emit({date:o,concept:e})}isReserved(o,e){return this.reservations$.pipe(nt(n=>!!n.find(s=>s.concept._id===e._id&&s.startAt.toDateString()===o.toDateString())))}getPositionReserved(o,e){return this.reservations$.pipe(nt(n=>{let s=n.find(F=>F.concept._id===e._id&&F.startAt.toDateString()===o.toDateString());return s?s?.concept?.positions[0]:void 0}))}};t.\u0275fac=function(e){return new(e||t)(C(Lt),C(W))},t.\u0275cmp=f({type:t,selectors:[["app-date-item"]],inputs:{date:"date",concepts:"concepts"},outputs:{selectedConcept:"selectedConcept",deselectConcept:"deselectConcept"},standalone:!0,features:[h],decls:15,vars:12,consts:[["fxLayout","row","fxLayoutGap","10px"],["fxLayout","column","fxLayoutAlign","center center",1,"date-container",3,"matTooltip"],[1,"day"],["fxFlex",""],["fxLayout","column","fxLayoutGap","5px",1,"mat-mdc-chip-set-stacked"],["mat-stroked-button",""],["mat-stroked-button","",3,"click"],["color","primary"]],template:function(e,n){e&1&&(r(0,"mat-card")(1,"mat-card-content")(2,"div",0)(3,"div",1),g(4,"date"),r(5,"div",2),c(6),g(7,"date"),a(),r(8,"div"),c(9),g(10,"date"),a()(),r(11,"div",3)(12,"div",4),b(13,le,3,3,null,null,ce),a()()()()()),e&2&&(p(3),ut("matTooltip",A(4,3,n.date,"fullDate")),p(3),S(" ",A(7,6,n.date,"dd")," "),p(3),S(" ",A(10,9,n.date,"EE")," "),p(4),D(n.concepts))},dependencies:[x,X,Z,_,$,Mt,j,V,N,H,T,z,k,et],styles:[".date-container[_ngcontent-%COMP%]{text-align:center;color:#323c3c}.day[_ngcontent-%COMP%]{font-size:28px;font-weight:500}mat-card[_ngcontent-%COMP%]{margin-bottom:10px}button[_ngcontent-%COMP%]{width:100%;align-items:left;justify-content:left;font-weight:400!important}"]});let i=t;return i})();var Yt=(()=>{let t=class t{constructor(){this.positionSelected=new E}onClick(){this.position.enabled&&this.positionSelected.emit(this.position)}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f({type:t,selectors:[["app-position"]],inputs:{position:"position"},outputs:{positionSelected:"positionSelected"},decls:3,vars:2,consts:[["fxLayoutAlign","center","fxFlex","",1,"position-card",3,"click"]],template:function(e,n){e&1&&(r(0,"div",0),d("click",function(){return n.onClick()}),r(1,"span"),c(2),a()()),e&2&&(mt("disabled",n.position.enabled?null:!0),p(2),S(" ",n.position.name," "))},dependencies:[j,V],styles:[".position-card[_ngcontent-%COMP%]{border-radius:5px;border-top:3px solid #00b096;padding:15px 10px;cursor:pointer;transition:box-shadow .28s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f}.position-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#323c3c;font-size:18px;font-weight:500}.position-card[_ngcontent-%COMP%]:hover{box-shadow:0 3px 5px -1px #0003,0 5px 8px #00000024,0 1px 14px #0000001f}.position-card[disabled][_ngcontent-%COMP%]{cursor:default;border-top:3px solid #45bfa8;background-color:#efefef}.position-card[disabled][_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:gray}.position-card[disabled][_ngcontent-%COMP%]:hover{box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f}"]});let i=t;return i})();var de=(i,t)=>t.name;function ue(i,t){if(i&1){let l=w();r(0,"div",3)(1,"app-position",4),d("positionSelected",function(e){v(l);let n=m();return M(n.onPositionSelected(e))}),a()()}if(i&2){let l=t.$implicit;p(),u("position",l)}}var Jt=(()=>{let t=class t{constructor(){this.positionSelected=new E}onPositionSelected(o){this.positionSelected.emit(o)}goBack(){this.positionSelected.emit()}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f({type:t,selectors:[["app-position-list"]],inputs:{date:"date",concept:"concept"},outputs:{positionSelected:"positionSelected"},decls:14,vars:4,consts:[[1,"card-header-actions"],["mat-icon-button","","aria-label","Go back","color","accent","matTooltip","Go back",3,"click"],["fxLayout","row wrap"],["fxFlex","20","fxFlex.xs","25",1,"item"],[3,"position","positionSelected"],["class","item","fxFlex","20","fxFlex.xs","25"]],template:function(e,n){e&1&&(r(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),c(3,"Work station"),a(),r(4,"mat-card-subtitle"),c(5),g(6,"date"),a(),r(7,"div",0)(8,"button",1),d("click",function(){return n.goBack()}),r(9,"mat-icon"),c(10,"arrow_back"),a()()()(),r(11,"mat-card-content",2),b(12,ue,2,1,"div",5,de),a()()),e&2&&(p(5),S("Select a work station for the date ",A(6,1,n.date,"mediumDate"),""),p(7),D(n.concept.positions))},dependencies:[$,V,N,H,Q,tt,G,T,U,k,Yt,Z],styles:[".item[_ngcontent-%COMP%]{padding:5px}.card-header-actions[_ngcontent-%COMP%]{display:flex;flex:1;justify-content:flex-end}"]});let i=t;return i})();var Kt=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=O({type:t}),t.\u0275inj=L({imports:[x,_]});let i=t;return i})();function Ce(i,t){if(i&1){let l=w();r(0,"app-date-item",6),d("selectedConcept",function(e){v(l);let n=m();return M(n.onSelectedConcept(e))})("deselectConcept",function(e){v(l);let n=m();return M(n.onDeselectConcept(e))}),a()}if(i&2){let l=t.$implicit,o=m();u("date",l)("concepts",o.concepts)}}function xe(i,t){if(i&1){let l=w();r(0,"app-position-list",7),d("positionSelected",function(e){v(l);let n=m();return M(n.onPositionSelected(e))}),a()}if(i&2){let l=m();u("date",l.selectedConcept.date)("concept",l.selectedConcept.concept)}}var Xt=(()=>{let t=class t{constructor(o,e){this.router=o,this.store=e,this.dateRange=[],this.concepts=[],this.activeTab=0,this.selectedConcept=null,this.reservations$=this.store.select(ot);let n=this.router.getCurrentNavigation()?.extras?.state;if(n&&n.selectedConcepts){this.concepts=n.selectedConcepts;let s=new Date,F=new Date;F.setDate(F.getDate()+15),this.dateRange=this.createDateRange(s,F)}else this.goHome()}createDateRange(o,e){let n=[];for(let s=new Date(o);s<new Date(e);s.setDate(s.getDate()+1))s.getDay()!=6&&s.getDay()!=0&&n.push(new Date(s));return n}onSelectedConcept(o){this.selectedConcept=o,this.activeTab=1}onPositionSelected(o){if(this.activeTab=0,o&&this.selectedConcept){let e={_id:"x"+Math.floor(Math.random()*1e10),startAt:this.selectedConcept.date,endAt:this.selectedConcept.date,concept:lt(pt({},this.selectedConcept.concept),{positions:[o]}),user:"xavi"};this.store.dispatch(Vt({reservation:e}))}}onDeselectConcept(o){this.store.dispatch(jt({date:o.date,concept:o.concept}))}goHome(){this.router.navigateByUrl("")}};t.\u0275fac=function(e){return new(e||t)(C(B),C(W))},t.\u0275cmp=f({type:t,selectors:[["app-select-date"]],standalone:!0,features:[h],decls:16,vars:2,consts:[[1,"container"],[3,"selectedIndex"],[1,"tab-container"],[1,"card-header-actions"],["mat-icon-button","","aria-label","Go back","color","accent","matTooltip","Go back",3,"click"],[3,"date","concept"],[3,"date","concepts","selectedConcept","deselectConcept"],[3,"date","concept","positionSelected"],[3,"date","concepts"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"mat-tab-group",1)(2,"mat-tab")(3,"div",2)(4,"mat-card-header")(5,"mat-card-title"),c(6,"Select the dates"),a(),r(7,"div",3)(8,"button",4),d("click",function(){return n.goHome()}),r(9,"mat-icon"),c(10,"arrow_back"),a()()()(),b(11,Ce,1,2,"app-date-item",8,dt),a()(),r(13,"mat-tab")(14,"div",2),I(15,xe,1,2,"app-position-list",5),a()()()()),e&2&&(p(),u("selectedIndex",n.activeTab),p(10),D(n.dateRange),p(4),J(15,n.selectedConcept?15:-1))},dependencies:[x,qt,_,Q,G,T,U,k,It,Pt,Kt,Jt],styles:[".container[_ngcontent-%COMP%]{max-width:600px;margin:1em auto;padding:0 5px}[_nghost-%COMP%]     mat-tab-header{display:none!important}.tab-container[_ngcontent-%COMP%]{padding:5px}.card-header-actions[_ngcontent-%COMP%]{display:flex;flex:1;justify-content:flex-end}"]});let i=t;return i})();var _e=[{path:"",component:Gt,children:[{path:"",component:Ut},{path:"schedule",component:Xt}]}],Zt=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=O({type:t}),t.\u0275inj=L({imports:[P.forChild(_e),P]});let i=t;return i})();var Ti=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=O({type:t}),t.\u0275inj=L({imports:[x,Zt]});let i=t;return i})();export{Ti as MainModule};
